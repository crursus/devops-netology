# Домашнее задание к занятию "6.1. Типы и структура СУБД"


1. Подходящие типы СУБД для каждой модели данных сущности:

|                                 Сущность (Задача)                                  |               Тип СУБД               |                                     Описание                                      |
|:----------------------------------------------------------------------------------:|:------------------------------------:|:---------------------------------------------------------------------------------:|
|                            Электронные чеки в json виде                            |       Документ-ориентированная       |              Структура JSON и документо-ориентированной БД совпадают              |
|              Склады и автомобильные дороги для логистической компании              | Графовая (В меньшей степени сетевая) |                  Оптимальный выбор для определения лучшего пути                   |
|                              Генеалогические деревья                               |            Иерархическая             |                 Дерево с одним родителем и несколькими потомками                  |
| Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации |            Ключ-значение             |                Идеальное применение для лучшей производительности                 |
|                   Отношения клиент-покупка для интернет-магазина                   |             Реляционная              | Сложные взаимоотношения клиент-продавец, необходимость большого количества связей |
Думаю гибридное применение СУБД самый лучший вариант для крупных систем.

---

2. Классификация распределённого высоконагруженного приложения согласно CAP- и PACELC-теоремам в следующих реализациях:

|                                Реализация                                |            CAP             | PACELC |
|:------------------------------------------------------------------------:|:--------------------------:|:------:|
| Данные записываются на все узлы с задержкой до часа (асинхронная запись) | Класс AP (Возможно даже P) | PA/EL  |
|  При сетевых сбоях, система может разделиться на 2 раздельных кластера   |          Класс CA          | PA/EL  |
|    Система может не прислать корректный ответ или сбросить соединение    |          Класс CP          | PC/EC  |
Выбирал с учётом нормальной работы при конкретной реализации (CAP). В целом необходимо больше вводных (PACELC).

---
3. Полностью сочетаться принципы ACID и BASE в одной системе не смогут: 
   * Полярность требований надёжности (ACID) и доступности (BASE)
   * Отсутствие в BASE наборов требований к транзакциям
   * Конфликт **Согласованности** и **Базовой доступности**

Возможно применение в системах использующих принципы на разных этапах обработки запросов к СУБД. Например, принципы ACID в основной СУБД и принципы BASE при реализации кэша.

ACID
* A - atomicity (атомарность) никакая транзакция не будет зафисирована в БД частично.
* C - consistency (согласованность) каждая успешная транзакция фиксирует только допустимые результаты.
* I - isolation (изоляция) параллельные транзакции не искажают результат друг друга.
* D - durability (стойкость) гарантия применения успешных транзакций, независимо от низкоуровневых проблем.

BASE
* BA - basically availability (базовая доступность) деградация части узлов ведет к деградации части сессий, исключая полную деградацию системы. Система отвечает на любой запрос, но в ответе могут быть неверные данные. 
* S - soft state (неустойчивое состояние) уменьшение времени хранения сессий и фиксация обновлений только критичных операций.
* E - eventually consistent (конечная согласованность) изменение состояния в конечном итоге применится на все системы.


---

4. Как понял из лекции, key-value хранилище имеющее механизм Pub/Sub это Redis.

Redis ориентирован на достижение максимальной производительности на атомарных операциях. Используется для баз данных, кешей и брокеров сообщений.

К минусам можно отнести следующие особенности:
* Размещение данных в памяти (резидентная СУБД) - нужно много ОЗУ
* Система репликации сама по себе не поддерживает автоматическую отказоустойчивость (решается с использованием Redis Sentinel) - необходимы дополнительные ресурсы под экземпляры

