# Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"

## Обязательные задания

1. * Так как переменные не за декларированы в явном виде, в зависимости от указания на переменную выводится результат
	
   * Переменным c,d,e будут присвоены следующие значения:
		* c - `a+b` Рассматривается как строка
		* d - `1+2` **a** и **b** рассматриваются уже как переменные, но в целом всё равно строка с подстановкой значений
		* e - `3` Выражение `$a+$b`, экранированное скобками, приводиться к целочисленному и считается как арифметическая операция 

1. Исправил скрипт:
	```bash
	#!/usr/bin/env bash
	while ((1==1)) #Добавил скобку
	do
		curl https://localhost:4757
		if (($? != 0))
		then
 			echo Сервис не доступен
			date > curl.log #Если именно дату проверки, а не лог попыток (с целью экономии места) 
		else
 			echo Сервис доступен
 			break #Добавил выход из цикла
		fi
	done
	```
1. Написал скрипт, который проверяет доступность трёх IP: 127.0.0.1, 172.28.128.10, 87.250.250.242 по 80 порту и записывает результат в файл test.log. Доступность проверяется пять раз.

	```shell
	#!/usr/bin/env bash
	a=5
	b=$(($a+1))
	 	while (($a > 0))
 	do
 	  echo Проверка № $(($b-$a)) | tee -a test.log
 		date
 		curl -I http://127.0.0.1:80 >> test.log # Переработать
 		curl -I 172.28.128.10:80 >> test.log	# Переработать
 		curl -I 87.250.250.242:80 >> test.log	# Переработать
 		let "a -= 1"
 	done 
 	```
> Переработать с использованием массивов и циклов

1. Переписал заново скрипт из предыдущего задания (с использованием массивов) чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. IP этого узла пишется в файл error, скрипт прерывается. Использовал локальные IP, чтобы управлять доступностью

	```shell
	#!/usr/bin/env bash
	a=1
 	array_ip=(127.0.0.1 172.28.128.10 172.28.128.31)
	while ((1==1))
 	do
 	  echo ---- Начало проверки № $a ---- | tee -a test.log
 	  date
 	  for i in ${array_ip[@]}
 	  do
 	    curl -I $i:80 >> test.log
 	  done
 	  if (($? == 0))
      then
        echo ---- Конец проверки № $a ---- | tee -a test.log
    else
        echo Хост $i не отвечает | tee -a error.log
        echo ---- Конец всех проверок ---- | tee -a test.log
        break
    fi
    let "a += 1"
 	  sleep 5
 	done

 	```


## Дополнительное задание (со звездочкой*)

Почитал про хуки: commit-msg. Наверное имеет смысл при автоматизации глобальных внесений изменений. 


